---
interface Props {
  agent: {
    name: string;
    role: string;
    phone: string;
    email: string;
    photo?: string;
  };
  objectId?: string;
}

const { agent, objectId } = Astro.props;
---

<div class="sidebar-contact-card">
  {objectId && (
    <div class="object-id">
      <i class="fas fa-hashtag"></i>
      Objekt-ID: {objectId}
    </div>
  )}

  <div class="agent-info">
    {agent.photo && (
      <img src={agent.photo} alt={agent.name} class="agent-photo" />
    )}
    <div>
      <h3 class="agent-name">{agent.name}</h3>
      <p class="agent-role">{agent.role}</p>
    </div>
  </div>

  <div class="contact-buttons">
    <a href={`tel:${agent.phone}`} class="contact-btn phone">
      <i class="fas fa-phone"></i>
      {agent.phone}
    </a>
    <a href={`mailto:${agent.email}`} class="contact-btn email">
      <i class="fas fa-envelope"></i>
      E-Mail senden
    </a>
  </div>

  <form class="quick-contact-form">
    <input type="text" placeholder="Ihr Name *" required />
    <input type="email" placeholder="Ihre E-Mail *" required />
    <input type="tel" placeholder="Telefon" />
    <textarea placeholder="Ihre Nachricht" rows="3"></textarea>
    <button type="submit" class="submit-btn">
      <i class="fas fa-paper-plane"></i>
      Anfrage senden
    </button>
  </form>
</div>

<style>
  .sidebar-contact-card {
    background: var(--color-white);
    border-radius: var(--radius-lg);
    padding: var(--spacing-xl);
    box-shadow: var(--shadow-md);
    position: sticky;
    top: 200px;
  }

  .object-id {
    background: var(--color-cream);
    padding: var(--spacing-sm) var(--spacing-md);
    border-radius: var(--radius-sm);
    font-size: var(--text-sm);
    color: var(--color-text-light);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
  }

  .object-id i {
    color: var(--color-accent);
  }

  .agent-info {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-xl);
  }

  .agent-photo {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-full);
    object-fit: cover;
  }

  .agent-name {
    font-size: var(--text-lg);
    font-weight: 600;
    color: var(--color-primary);
    margin-bottom: 0.2rem;
  }

  .agent-role {
    font-size: var(--text-sm);
    color: var(--color-text-light);
  }

  .contact-buttons {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    margin-bottom: var(--spacing-xl);
  }

  .contact-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
    text-decoration: none;
    font-weight: 600;
    font-size: var(--text-sm);
    transition: var(--transition-smooth);
  }

  .contact-btn.phone {
    background: var(--color-accent);
    color: var(--color-white);
  }

  .contact-btn.phone:hover {
    background: var(--color-accent-secondary, #b8941f);
    transform: translateY(-2px);
  }

  .contact-btn.email {
    background: var(--color-cream);
    color: var(--color-primary);
  }

  .contact-btn.email:hover {
    background: var(--color-accent-light);
  }

  .quick-contact-form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-md);
  }

  .quick-contact-form input,
  .quick-contact-form textarea {
    padding: var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-sm);
    font-family: var(--font-body);
    font-size: var(--text-sm);
    transition: var(--transition-smooth);
  }

  .quick-contact-form input:focus,
  .quick-contact-form textarea:focus {
    outline: none;
    border-color: var(--color-accent);
  }

  .submit-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: var(--color-primary);
    color: var(--color-white);
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: var(--text-sm);
    cursor: pointer;
    transition: var(--transition-smooth);
  }

  .submit-btn:hover {
    background: var(--color-secondary);
    transform: translateY(-2px);
  }

  @media (max-width: 992px) {
    .sidebar-contact-card {
      position: static;
    }
  }
</style>
