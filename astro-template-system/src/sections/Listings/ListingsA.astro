---
import type { FeaturedListingsProps } from '../../../schema/site.schema';
import PropertyCard from '../../components/PropertyCard.astro';
import propertiesData from '../../data/properties.json';

interface Props extends Partial<FeaturedListingsProps> {}

const { 
  title = "Aktuelle Angebote",
  subtitle,
  limit = 6,
  cta
} = Astro.props;

const properties = propertiesData.slice(0, limit);
---

<section class="listings section">
  <div class="container">
    {title && (
      <div class="section-header">
        <h2 class="section-title">{title}</h2>
        {subtitle && <p class="section-subtitle">{subtitle}</p>}
      </div>
    )}

    <div class="listings-grid">
      {properties.map(property => (
        <PropertyCard property={property} />
      ))}
    </div>

    {cta && (
      <div class="listings-cta">
        <a href={cta.href} class="btn btn-primary">
          {cta.text}
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
    )}
  </div>
</section>

<style>
  .listings {
    background: var(--color-cream);
  }

  .section-header {
    margin-bottom: var(--spacing-3xl);
  }

  .listings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: var(--spacing-xl);
  }

  .listings-cta {
    margin-top: var(--spacing-3xl);
    text-align: center;
  }

  @media (max-width: 768px) {
    .listings-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
